# EDGE FUNCTIONS - ENVIRONMENT VARIABLES

## Required Environment Variables

Add these to your Supabase Dashboard → Project Settings → Edge Functions

### Database Connection
```
SUPABASE_URL=https://ffahkiukektmhkrkordn.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIs...
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIs...
```

### Stripe Configuration
```
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
```

### PIX Configuration (Brazil)
```
PIX_PROVIDER=mercadopago
PIX_API_KEY=TEST-...
# or for OpenPIX:
# PIX_PROVIDER=openpix
# PIX_API_KEY=your_openpix_api_key
```

### Host Connect Integration
```
HOST_CONNECT_API_URL=https://api.host-connect.com/v1
HOST_CONNECT_API_KEY=host_api_key_...
HOST_CONNECT_WEBHOOK_SECRET=host_webhook_secret
```

### Portal Connect (Content)
```
PORTAL_CONNECT_URL=https://portal-connect.supabase.co
PORTAL_CONNECT_ANON_KEY=portal_anon_key_...
```

### Security & App Settings
```
APP_ENV=production
APP_DEBUG=false
ENCRYPTION_KEY=your-32-char-encryption-key
JWT_SECRET=your-jwt-secret
```

## Optional Variables

```
# Cache TTL (seconds)
CACHE_TTL_SEARCH=60
CACHE_TTL_PROPERTY=300

# Rate Limiting
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# Email/SMS (future)
SENDGRID_API_KEY=SG.xxx
TWILIO_ACCOUNT_SID=ACxxx
TWILIO_AUTH_TOKEN=xxxx
```

## How to Set Environment Variables

1. Go to Supabase Dashboard
2. Select your project
3. Go to Project Settings
4. Click on "Edge Functions"
5. Add each variable one by one

## Security Notes

⚠️ **IMPORTANT:**
- Never commit these keys to git
- Use different keys for staging/production
- Rotate keys regularly
- Monitor usage in Stripe/MercadoPago dashboards

## Testing Locally

Create a `.env` file in your project root:

```bash
SUPABASE_URL=https://ffahkiukektmhkrkordn.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
STRIPE_SECRET_KEY=sk_test_...
```

Then run:
```bash
supabase functions serve
```
